<html>
  <head>
    <meta charset=utf-8 />
    <title>Switching basemaps</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>


    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.1.3/dist/esri-leaflet.js"
            integrity="sha512-pijLQd2FbV/7+Jwa86Mk3ACxnasfIMzJRrIlVQsuPKPCfUBCDMDUoLiBQRg7dAQY6D1rkmCcR8286hVTn/wlIg=="
            crossorigin=""></script>


    <style>
      body { margin:0; padding:0; }
      #map { position: absolute; top:0; bottom:0; right:0; left:0; }
    </style>
  </head>
  <body>

    <style>
      #basemaps-wrapper {
        position: absolute;
        top: 5px;
        right: 5px;
        z-index: 400;
        background: white;
        padding: 3px;
      }

    </style>

    <div id="map"></div>

    <div id="basemaps-wrapper" class="leaflet-bar">
      <select name="basemaps" id="basemaps" onChange="changeBasemap(basemaps)">
        <option value="Topographic">Topographic</option>
        <option value="Streets">Streets</option>
        <option value="NationalGeographic">National Geographic</option>
        <option value="Oceans">Oceans</option>
        <option value="Gray">Gray</option>
        <option value="DarkGray">Dark Gray</option>
        <option value="Imagery">Imagery Hybrid</option>
        <option value="ImageryClarity">Imagery</option>
        <option value="ShadedRelief">Shaded Relief</option>
      </select>
    </div>

    <script>
      var map = L.map('map').setView([-33.87, 150.77], 10);
      var layer = L.esri.basemapLayer('Topographic').addTo(map);
      var layerLabels;

      function setBasemap(basemap) {
        if (layer) {
          map.removeLayer(layer);
        }

        layer = L.esri.basemapLayer(basemap);

        map.addLayer(layer);

        if (layerLabels) {
          map.removeLayer(layerLabels);
        }

        if (basemap === 'ShadedRelief'
            || basemap === 'Oceans'
            || basemap === 'Gray'
            || basemap === 'DarkGray'
            || basemap === 'Imagery'
            || basemap === 'Terrain'
           ) {
          layerLabels = L.esri.basemapLayer(basemap + 'Labels');
          map.addLayer(layerLabels);
        }
      }

      function changeBasemap(basemaps){
        var basemap = basemaps.value;
        setBasemap(basemap);
      }
    </script>

  </body>
</html>
